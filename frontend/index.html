<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuzuriha Rin</title>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/styles/styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Phone Container (always visible, centered) -->
        <div class="phone-container">
            <div class="wechat-shell hidden" id="wechatShell" role="application" aria-label="chat app">
                <div class="wechat-screen">
                    <div class="wechat-top">
                        <div class="wechat-statusbar">
                            <div class="status-left">
                                <span class="status-time" id="statusTime">
                                    <span id="statusAmPm">上午</span>
                                    <span id="statusClock">9:41</span>
                                </span>
                            </div>
                            <div class="punch-hole" aria-hidden="true"></div>
                            <div class="status-right">
                                <img src="/static/images/status_bar_icon/signal.svg" alt="Signal"
                                    class="status-icon status-icon-signal">
                                <img src="/static/images/status_bar_icon/wifi.svg" alt="WiFi"
                                    class="status-icon status-icon-wifi">
                                <img src="/static/images/status_bar_icon/battery.svg" alt="Battery"
                                    class="status-icon battery-icon">
                                <span class="battery-percent">100%</span>
                            </div>
                        </div>

                        <div class="wechat-header">
                            <button id="backButton" class="back-button" aria-label="back"></button>
                            <div class="header-info">
                                <div class="contact-name" id="chatTitle">Rin</div>
                            </div>
                            <div class="menu-wrapper">
                                <button class="menu-button" id="menuButton" aria-label="more actions"
                                    aria-haspopup="true" aria-expanded="false" title="更多">
                                    <span class="action-dot"></span>
                                    <span class="action-dot"></span>
                                    <span class="action-dot"></span>
                                </button>
                                <div class="menu-popover" id="menuPopover" role="menu" aria-hidden="true">
                                    <button class="menu-item" type="button" data-action="clear" role="menuitem">
                                        <span class="menu-item-label">清空对话</span>
                                        <span class="menu-item-desc">重新创建当前会话</span>
                                    </button>
                                    <button class="menu-item" type="button" data-action="character" role="menuitem">
                                        <span class="menu-item-label">角色设置</span>
                                        <span class="menu-item-desc">编辑人设与行为参数</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="wechat-main">
                        <!-- Session List View -->
                        <div class="session-list-view hidden" id="sessionListView">
                            <div class="session-list" id="sessionList"></div>
                        </div>

                        <!-- Chat View -->
                        <div class="chat-view" id="chatView">
                            <button class="new-message-indicator" id="newMessageBtn" type="button" aria-label="新消息提醒">
                                <span class="indicator-icon" aria-hidden="true"></span>
                                <span class="indicator-text" id="newMessageText">1 条新消息</span>
                            </button>
                            <div class="typing-hint" id="typingHint">对方正在输入...</div>
                        </div>
                    </div>

                    <div class="wechat-bottom">
                        <div class="wechat-input" id="wechatInput">
                            <button class="input-icon voice-btn" type="button" aria-label="voice"></button>
                            <div class="input-box">
                                <textarea id="userInput" rows="1" disabled aria-label="message input"></textarea>
                            </div>
                            <button class="input-icon emoji-btn" type="button" aria-label="emoji"></button>
                            <button class="input-icon plus-btn" type="button" aria-label="plus"></button>
                            <button id="toggleBtn" class="toggle-btn hidden" type="button" aria-label="send"
                                disabled>发送</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Debug Log Panel (right side) -->
        <div class="debug-log-panel hidden" id="debugLogPanel">
            <div class="debug-log-content" id="debugLogContent"></div>
        </div>
    </div>

    <!-- Floating Settings Button -->
    <button id="floatingSettingsBtn" class="floating-settings-btn hidden" aria-label="settings"></button>

    <!-- Modal Root -->
    <div id="modalRoot"></div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script type="module" src="/static/scripts/app.js"></script>
</body>

</html>